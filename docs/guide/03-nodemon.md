# Step 3 ‚Äî nodemon (Auto-restart)

> üéØ **Analogy:** nodemon ‡∏Ñ‡∏∑‡∏≠ "‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏õ‡∏•‡∏∏‡∏Å" ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏´‡∏° ‚Äî ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏õ‡∏•‡∏∏‡∏Å server ‡πÉ‡∏´‡πâ restart ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà nodemon ‡πÅ‡∏Å‡πâ

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô `app.js` ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:

```
1. ‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î server
2. ‡∏£‡∏±‡∏ô node app.js ‡πÉ‡∏´‡∏°‡πà
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö
4. ‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏µ‡∏Å ‚Üí ‡∏ß‡∏ô‡∏ã‡πâ‡∏≥‡∏Ç‡πâ‡∏≠ 1
```

‡∏ô‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πà‡∏≠‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤ ‚Äî **nodemon** ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≠‡∏¢ Watch ‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‡∏à‡∏∞ restart server ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

## ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á nodemon

```bash
npm install -D nodemon
```

Flag `-D` (‡∏´‡∏£‡∏∑‡∏≠ `--save-dev`) ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á **devDependency** ‚Äî ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô Development ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô Production

::: tip üí° devDependency vs dependency
- `dependencies` ‚Äî ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á dev ‡πÅ‡∏•‡∏∞ production (‡πÄ‡∏ä‡πà‡∏ô express, mysql2)
- `devDependencies` ‚Äî ‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡∏ï‡∏≠‡∏ô dev ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÄ‡∏ä‡πà‡∏ô nodemon)

‡πÄ‡∏ß‡∏•‡∏≤ Deploy ‡∏Ç‡∏∂‡πâ‡∏ô server ‡∏à‡∏£‡∏¥‡∏á ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ `npm install --production` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á devDependencies ‡πÑ‡∏î‡πâ
:::

## ‡πÄ‡∏û‡∏¥‡πà‡∏° Scripts ‡πÉ‡∏ô package.json

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `package.json` ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ‡∏™‡πà‡∏ß‡∏ô `scripts`:

```json
"scripts": {
  "start": "node app.js",
  "dev": "nodemon app.js"
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `start` ‚Äî ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô Production: ‡∏£‡∏±‡∏ô server ‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÑ‡∏°‡πà watch ‡πÑ‡∏ü‡∏•‡πå
- `dev` ‚Äî ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô Development: ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ nodemon ‚Äî restart ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

::: warning ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢
`"dev": "nodemon node app.js"` ‚Äî **‡∏ú‡∏¥‡∏î!** `nodemon` ‡πÅ‡∏•‡∏∞ `node` ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ñ‡∏ô‡∏•‡∏∞‡∏≠‡∏±‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏™‡πà‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ `"dev": "nodemon app.js"` ‚Äî nodemon ‡∏à‡∏∞‡πÉ‡∏ä‡πâ node ‡∏£‡∏±‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á
:::

## ‡∏ó‡∏î‡∏™‡∏≠‡∏ö nodemon

```bash
npm run dev
```

Terminal ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á:
```
[nodemon] 3.x.x
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,cjs,json
[nodemon] starting `node app.js`
Server running on http://localhost:3000
```

‡∏•‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô `app.js` ‡πÄ‡∏õ‡πá‡∏ô `"Hello Express!"` ‡πÅ‡∏•‡πâ‡∏ß Save ‚Äî nodemon ‡∏à‡∏∞ restart ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î Ctrl+C ‡πÄ‡∏≠‡∏á

::: details ‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏á Save
```
[nodemon] restarting due to changes...
[nodemon] starting `node app.js`
Server running on http://localhost:3000
```
:::

::: tip üí° ‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ `npm run dev` ‡πÄ‡∏™‡∏°‡∏≠
‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô `node app.js` ‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏î `Ctrl+C` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î
:::

::: tip üí° ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô nodemon restart ‡∏ï‡∏≠‡∏ô Upload ‡πÑ‡∏ü‡∏•‡πå
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ Multer ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `uploads/` ‚Äî nodemon ‡∏à‡∏∞ detect ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞ restart server ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡πâ‡∏≤)

‡πÅ‡∏Å‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° `--ignore` ‡πÉ‡∏ô `package.json`:

```json
"scripts": {
  "start": "node app.js",
  "dev": "nodemon app.js --ignore uploads/"
}
```

nodemon ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£ watch ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `uploads/` ‚Äî ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà restart
:::

## Glossary

| ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ |
|:--------|:---------|
| **nodemon** | ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ Watch ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞ restart Node.js ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ |
| **devDependency** | Package ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Production |
| **Production** | ‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á (‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Development ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö) |
| **Development** | ‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‚Äî ‡πÉ‡∏ä‡πâ nodemon, .env, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• test |
| **npm run** | ‡∏£‡∏±‡∏ô script ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏ô `package.json` |
| **Watch** | ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á |
| **Hot Reload** | ‡∏Å‡∏≤‡∏£ reload application ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô |
| **--ignore** | flag ‡∏ö‡∏≠‡∏Å nodemon ‡∏ß‡πà‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏´‡∏ô‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á watch |
